<main class="main" id="main">    
    <div class="card p-3">
        <app-pagetitle pagetitle="Create Protocol"></app-pagetitle>
        <form #form="ngForm" class="row mt-2">
            <div class="col-md-6">                
                <app-inputcontrol errmsg="{{tmpnameMessage}}"  [(inputModel)]="tmpTitle" lblname="Title" type="text"   inptclass="mb-3"  inputstyle="textbox newtextbox"></app-inputcontrol>
            </div>    
            <div class="col-md-6"> 
            <label class="form-label mb-1">Items <span class="text-danger">*</span></label>     
             <app-item-ddcomponent exfrm="serchdd" dropdownTitile="Items" filedName="title" fieldId="title" (selectedvalue)=oncat($event)  [options]="itmoptions" [filteredOptions]="itmfilteredOptions" ></app-item-ddcomponent> 
             <span class="small text-danger">{{itmnameMessage}}</span>
            </div>  
            <!-- <div class="col-md-3" *ngFor="let itm of TemplateItems">
                <div class="card p-3 shadow-none" style="background-color: #e8f0f5;">
                    <div class="d-flex align-items-center justify-content-between">
                        {{itm.title}}
                        <a href="#" class="btn btn-sm text-danger py-0"><i class="bi bi-trash"></i></a>
                    </div>                   
                </div>
            </div> -->
            <div class="table-responsive mt-md-3" *ngIf="TemplateItems.length>=1">
                <table class="table data-list">
                   
                        <tr>
                            <th>Item</th>
                            <th class="text-end">Action</th>
                        </tr>                   
                        <tr *ngFor="let itm of TemplateItems">
                            <td>{{itm.title}}</td>
                            <td class="text-end">
                                <a href="#DeleteItmModal" (click)="setModalpopup(itm)"  data-bs-toggle="modal" class="btn btn-white btn-sm text-danger border py-1"><i class="bi bi-trash"></i></a>
                            </td>
                        </tr>
                    
                </table>
            </div>
            <div class="modal fade" tabindex="-1" id="DeleteItmModal">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header border-0">         
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center">
                        <img src="/assets/images/icon/trash.png" class="img-fluid d-block mx-auto mb-2" width="70">
                        <b>Delete Record of <b class="text-theme">{{Item?Item.title:""}}</b></b>
                        <p class="small text-secondary">Are you sure you want to delete this record ?</p>
            
                        <button (click)="deleteItem(Item)"  data-bs-dismiss="modal" class="btn btn-danger">OK</button>
                    </div>       
                  </div>
                </div>
              </div>
            <div class="col-md-12">
                <span class="text-danger">{{mes}}</span>
            </div>
            <img *ngIf="loading" style="width:70px;height:70px;object-fit: contain;" class="d-block mx-auto" class="loader-img" src="/assets/images/loader.gif" />
            <div class="col-md-12 mt-2 text-end">    
                <app-buttoncontrolconcomponent routerLink="/{{templatelistUrl}}" btnstyle="btn btn-cancel mt-3 me-2 border-0 text-dark px-3" btnname="Cancel"></app-buttoncontrolconcomponent>                
                <app-buttoncontrolconcomponent [btndisable]="loading" (click)="onSubmit(form)"  btnstyle="bg-theme2 mt-3 border-0 px-5 text-white" btnname="Save"></app-buttoncontrolconcomponent> 
            </div>
        </form>
    </div>    
</main>
